<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <!-- 前面的 head 內容保持不變 -->
</head>
<body>
    <!-- 前面的 body 內容保持不變 -->

    <script>
        const questions = [
            // 問題列表保持不變
        ];

        // 表格生成代碼保持不變

        document.getElementById('teqForm').onsubmit = function(e) {
            e.preventDefault();
            const scores = {
                timeWaste: 0,
                timePassage: 0,
                pastOrientation: 0,
                presentOrientation: 0,
                futureOrientation: 0,
                timeManagement: 0,
                procrastination: 0
            };
            const counts = {...scores};

            questions.forEach((q, index) => {
                const value = parseInt(document.querySelector(`input[name="q${index + 1}"]:checked`).value);
                scores[q.category] += value;
                counts[q.category]++;
            });

            for (let category in scores) {
                scores[category] = (scores[category] / counts[category]).toFixed(2);
            }

            const animal = determineAnimal(scores);

            let resultHTML = '<h2>您的TEQ結果</h2>';
            const categories = ['timeWaste', 'timePassage', 'pastOrientation', 'presentOrientation', 'futureOrientation', 'timeManagement', 'procrastination'];
            categories.forEach(category => {
                resultHTML += `<p>${getCategoryName(category)}: ${scores[category]}</p>`;
            });

            resultHTML += `<h3>您的動物類型：${animal.name}</h3>`;
            resultHTML += `<img src="${animal.image}" alt="${animal.name}" style="max-width: 300px;">`;
            resultHTML += `<p>${animal.description}</p>`;

            document.getElementById('results').style.display = 'block';
            document.getElementById('results').innerHTML = resultHTML;
        };

        function getCategoryName(category) {
            const names = {
                timeWaste: "時間浪費感",
                timePassage: "時間流逝感",
                pastOrientation: "過去導向性",
                presentOrientation: "當下導向性",
                futureOrientation: "未來導向性",
                timeManagement: "時間管理",
                procrastination: "拖延傾向"
            };
            return names[category] || category;
        }

        function determineAnimal(scores) {
            const timeWasteHigh = scores.timeWaste > 4;
            const timePassageHigh = scores.timePassage > 4;
            const orientations = ['pastOrientation', 'presentOrientation', 'futureOrientation']
                .sort((a, b) => scores[b] - scores[a])
                .slice(0, 2);

            const animals = {
                'highHighPastPresent': { name: '水獺', image: 'otter.webp', description: '水獺的解說' },
                'highHighPastFuture': { name: '松鼠', image: 'squirrel.webp', description: '松鼠的解說' },
                'highHighPresentFuture': { name: '蜜蜂', image: 'bee.webp', description: '蜜蜂的解說' },
                'highLowPastPresent': { name: '大象', image: 'elephant.webp', description: '大象的解說' },
                'highLowPastFuture': { name: '貓頭鷹', image: 'owl.webp', description: '貓頭鷹的解說' },
                'highLowPresentFuture': { name: '海豚', image: 'dolphin.webp', description: '海豚的解說' },
                'lowHighPastPresent': { name: '獵豹', image: 'cheetah.webp', description: '獵豹的解說' },
                'lowHighPastFuture': { name: '變色龍', image: 'chameleon.webp', description: '變色龍的解說' },
                'lowHighPresentFuture': { name: '蝴蝶', image: 'butterfly.webp', description: '蝴蝶的解說' },
                'lowLowPastPresent': { name: '無尾熊', image: 'koala.webp', description: '無尾熊的解說' },
                'lowLowPastFuture': { name: '鯨魚', image: 'whale.webp', description: '鯨魚的解說' },
                'lowLowPresentFuture': { name: '金魚', image: 'goldfish.webp', description: '金魚的解說' }
            };

            const key = `${timeWasteHigh ? 'high' : 'low'}${timePassageHigh ? 'High' : 'Low'}${orientations.map(o => o.replace('Orientation', '')).join('')}`;
            return animals[key] || { name: '未知動物', image: 'unknown.webp', description: '無法確定具體動物類型' };
        }
    </script>
</body>
</html>
