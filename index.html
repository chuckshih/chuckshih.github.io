<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>時間體驗問卷 (TEQ) - 30題版本</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; max-width: 1000px; margin: auto; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background-color: #f2f2f2; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .question-text { text-align: left; }
        button { padding: 10px 20px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #45a049; }
        #results { margin-top: 20px; padding: 20px; background-color: #e9e9e9; border-radius: 5px; display: none; }
    </style>
</head>
<body>
    <h1>時間體驗問卷 (TEQ) - 30題版本</h1>
    <p>請根據您的真實感受，選擇最適合的選項。</p>
    <form id="teqForm">
        <table>
            <tr>
                <th class="question-text">問題</th>
                <th>完全<br>不同意<br>1</th>
                <th>非常<br>不同意<br>2</th>
                <th>稍微<br>不同意<br>3</th>
                <th>中立<br><br>4</th>
                <th>稍微<br>同意<br>5</th>
                <th>非常<br>同意<br>6</th>
                <th>完全<br>同意<br>7</th>
            </tr>
        </table>
        <button type="submit">提交</button>
    </form>
    <div id="results"></div>

    <script>
        const questions = [
            { text: "我覺得浪費時間讓我感到懊惱。", category: "timeWaste" },
            { text: "我經常考慮未來可能遇到的挑戰。", category: "futureOrientation" },
            { text: "我總是準時完成任務和工作。", category: "timeManagement" },
            { text: "我覺得一天的時間總是不夠用。", category: "timePassage" },
            { text: "我常覺得自己浪費了很多時間。", category: "timeWaste" },
            { text: "我喜歡活在當下，享受當前的時光。", category: "presentOrientation" },
            { text: "我常常忽略未來的規劃，而專注於當下。", category: "presentOrientation" },
            { text: "我常常推遲需要完成的重要任務。", category: "procrastination" },
            { text: "我經常因為過去的決定而後悔。", category: "pastOrientation" },
            { text: "有時我覺得時間像靜止了一樣慢。", category: "timePassage" },
            { text: "我覺得為了未來的成功，現在必須付出努力。", category: "futureOrientation" },
            { text: "我傾向於專注於當下的任務，而不是計劃未來。", category: "presentOrientation" },
            { text: "我經常回憶過去的經歷。", category: "pastOrientation" },
            { text: "我擅長在工作和休閒之間找到平衡。", category: "timeManagement" },
            { text: "我經常感到時間在不知不覺中溜走。", category: "timePassage" },
            { text: "我有時覺得時間的流逝沒有價值。", category: "timeWaste" },
            { text: "我經常設立長遠的目標，並為之努力。", category: "futureOrientation" },
            { text: "我認為過去的經歷塑造了現在的我。", category: "pastOrientation" },
            { text: "我認為自己能很好地管理時間。", category: "timeManagement" },
            { text: "我常常因為拖延而感到壓力。", category: "procrastination" },
            { text: "我經常感到時間被無意義的事情占用了。", category: "timeWaste" },
            { text: "我對過去發生的事常感到懷念。", category: "pastOrientation" },
            { text: "我覺得生活的節奏太快了。", category: "timePassage" },
            { text: "我覺得時間是一種有限的資源。", category: "timeWaste" },
            { text: "我經常為未來做詳細的計劃。", category: "futureOrientation" },
            { text: "我經常覺得時間過得很快。", category: "timePassage" },
            { text: "我覺得享受當下的生活比計劃未來更有意義。", category: "presentOrientation" },
            { text: "我經常因為過去的事情而後悔。", category: "pastOrientation" },
            { text: "我認為未來的成功取決於我現在的努力。", category: "futureOrientation" },
            { text: "我常常推遲需要完成的重要任務。", category: "procrastination" }
        ];

        const table = document.querySelector('table');
        questions.forEach((q, index) => {
            const row = table.insertRow();
            const cellQuestion = row.insertCell();
            cellQuestion.textContent = `${index + 1}. ${q.text}`;
            cellQuestion.className = 'question-text';

            for (let i = 1; i <= 7; i++) {
                const cell = row.insertCell();
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = `q${index + 1}`;
                radio.value = i;
                radio.required = true;
                cell.appendChild(radio);
            }
        });

        document.getElementById('teqForm').onsubmit = function(e) {
            e.preventDefault();
            const scores = {
                timeWaste: 0,
                timePassage: 0,
                pastOrientation: 0,
                presentOrientation: 0,
                futureOrientation: 0,
                timeManagement: 0,
                procrastination: 0
            };
            const counts = {...scores};

            questions.forEach((q, index) => {
                const value = parseInt(document.querySelector(`input[name="q${index + 1}"]:checked`).value);
                scores[q.category] += value;
                counts[q.category]++;
            });

            for (let category in scores) {
                scores[category] = (scores[category] / counts[category]).toFixed(2);
            }

            const animal = determineAnimal(scores);

            let resultHTML = '<h2>您的TEQ結果</h2>';
            resultHTML += `<p>時間浪費感: ${scores.timeWaste} (您對於時間被浪費的感覺${getDescription(scores.timeWaste, 'timeWaste')})</p>`;
            resultHTML += `<p>時間流逝感: ${scores.timePassage} (您對於時間流逝的感覺${getDescription(scores.timePassage, 'timePassage')})</p>`;
            resultHTML += `<p>過去導向性: ${scores.pastOrientation} (您${getDescription(scores.pastOrientation, 'pastOrientation')}關注過去)</p>`;
            resultHTML += `<p>當下導向性: ${scores.presentOrientation} (您${getDescription(scores.presentOrientation, 'presentOrientation')}關注現在)</p>`;
            resultHTML += `<p>未來導向性: ${scores.futureOrientation} (您${getDescription(scores.futureOrientation, 'futureOrientation')}關注未來)</p>`;
            resultHTML += `<p>時間管理: ${scores.timeManagement} (您的時間管理能力${getDescription(scores.timeManagement, 'timeManagement')})</p>`;
            resultHTML += `<p>拖延傾向: ${scores.procrastination} (您的拖延傾向${getDescription(scores.procrastination, 'procrastination')})</p>`;

            resultHTML += `<h3>您的動物類型：${animal.name}</h3>`;
            resultHTML += `<img src="${animal.image}" alt="${animal.name}" style="max-width: 300px;">`;
            resultHTML += `<p>${animal.description}</p>`;

            document.getElementById('results').style.display = 'block';
            document.getElementById('results').innerHTML = resultHTML;
        };

        function getDescription(score, category) {
            if (category === 'timeWaste' || category === 'timePassage' || category === 'timeManagement' || category === 'procrastination') {
                return score > 3.5 ? "較高" : "較低";
            } else {
                if (score <= 3) return "低度關注";
                if (score <= 5) return "中度關注";
                return "高度關注";
            }
        }

        function determineAnimal(scores) {
            const timePassageHigh = scores.timePassage > 3.5;
            const timeWasteHigh = scores.timeWaste > 3.5;

            // 处理导向得分，确保得分接近时也能正确排序
            const orientations = [
                { name: 'past', score: scores.pastOrientation },
                { name: 'present', score: scores.presentOrientation },
                { name: 'future', score: scores.futureOrientation }
            ];

            // 按得分排序（从高到低）
            orientations.sort((a, b) => b.score - a.score);

            // 选取得分最高的两个导向
            const topTwoOrientations = orientations.slice(0, 2).map(o => o.name);

            // 生成组合键
            const key = `${timePassageHigh ? 'high' : 'low'}${timeWasteHigh ? 'High' : 'Low'}${topTwoOrientations.join('')}`;

            // 打印生成的键用于调试
            console.log('Generated Key:', key);

            const animals = {
                'highHighpastpresent': { name: '水獺', image: 'otter.webp', description: '水獺的解說' },
                'highHighpastfuture': { name: '松鼠', image: 'squirrel.webp', description: '松鼠的解說' },
                'highHighpresentfuture': { name: '蜜蜂', image: 'bee.webp', description: '蜜蜂的解說' },
                'highLowpastpresent': { name: '大象', image: 'elephant.webp', description: '大象的解說' },
                'highLowpastfuture': { name: '貓頭鷹', image: 'owl.webp', description: '貓頭鷹的解說' },
                'highLowpresentfuture': { name: '海豚', image: 'dolphin.webp', description: '海豚的解說' },
                'lowHighpastpresent': { name: '獵豹', image: 'cheetah.webp', description: '獵豹的解說' },
                'lowHighpastfuture': { name: '變色龍', image: 'chameleon.webp', description: '變色龍的解說' },
                'lowHighpresentfuture': { name: '蝴蝶', image: 'butterfly.webp', description: '蝴蝶的解說' },
                'lowLowpastpresent': { name: '無尾熊', image: 'koala.webp', description: '無尾熊的解說' },
                'lowLowpastfuture': { name: '鯨魚', image: 'whale.webp', description: '鯨魚的解說' },
                'lowLowpresentfuture': { name: '金魚', image: 'goldfish.webp', description: '金魚的解說' }
            };

            return animals[key] || { name: '未知動物', image: 'unknown.webp', description: '無法確定具體動物類型' };
        }
    </script>
</body>
</html>
